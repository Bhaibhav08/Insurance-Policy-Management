<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between mb-8">
      <h1 class="text-3xl font-bold text-gray-900">Create New Policy</h1>
      <a routerLink="/admin-dashboard" class="btn-secondary">Back to Dashboard</a>
    </div>

    <!-- Success Message -->
    <div *ngIf="successMessage" class="bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-md mb-6">
      {{ successMessage }}
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md mb-6">
      {{ errorMessage }}
    </div>

    <div class="insurance-card p-8">
      <form [formGroup]="policyForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Policy Code *</label>
            <input type="text" formControlName="code" 
                   placeholder="e.g., LIFE001, AUTO001"
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
            <div *ngIf="policyForm.get('code')?.invalid && policyForm.get('code')?.touched" 
                 class="text-red-600 text-sm mt-1">
              <div *ngIf="policyForm.get('code')?.errors?.['required']">Policy code is required</div>
              <div *ngIf="policyForm.get('code')?.errors?.['minlength']">Policy code must be at least 3 characters</div>
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Category *</label>
            <select formControlName="category" 
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
              <option value="">Select category</option>
              <option value="life">Life Insurance</option>
              <option value="health">Health Insurance</option>
              <option value="auto">Auto Insurance</option>
              <option value="home">Home Insurance</option>
              <option value="travel">Travel Insurance</option>
            </select>
            <div *ngIf="policyForm.get('category')?.invalid && policyForm.get('category')?.touched" 
                 class="text-red-600 text-sm mt-1">
              Category is required
            </div>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Policy Title *</label>
          <input type="text" formControlName="title" 
                 placeholder="e.g., Comprehensive Life Insurance Plan"
                 class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
          <div *ngIf="policyForm.get('title')?.invalid && policyForm.get('title')?.touched" 
               class="text-red-600 text-sm mt-1">
            <div *ngIf="policyForm.get('title')?.errors?.['required']">Policy title is required</div>
            <div *ngIf="policyForm.get('title')?.errors?.['minlength']">Title must be at least 5 characters</div>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Description *</label>
          <textarea formControlName="description" rows="4"
                    placeholder="Provide a detailed description of the policy coverage, benefits, and terms..."
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"></textarea>
          <div *ngIf="policyForm.get('description')?.invalid && policyForm.get('description')?.touched" 
               class="text-red-600 text-sm mt-1">
            <div *ngIf="policyForm.get('description')?.errors?.['required']">Description is required</div>
            <div *ngIf="policyForm.get('description')?.errors?.['minlength']">Description must be at least 20 characters</div>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Monthly Premium (₹) *</label>
            <input type="number" formControlName="premium" min="0" step="0.01"
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
            <div *ngIf="policyForm.get('premium')?.invalid && policyForm.get('premium')?.touched" 
                 class="text-red-600 text-sm mt-1">
              <div *ngIf="policyForm.get('premium')?.errors?.['required']">Premium is required</div>
              <div *ngIf="policyForm.get('premium')?.errors?.['min']">Premium must be greater than 0</div>
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Term (Months) *</label>
            <select formControlName="termMonths" 
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
              <option value="12">12 months</option>
              <option value="24">24 months</option>
              <option value="36">36 months</option>
              <option value="60">60 months</option>
              <option value="120">120 months</option>
            </select>
            <div *ngIf="policyForm.get('termMonths')?.invalid && policyForm.get('termMonths')?.touched" 
                 class="text-red-600 text-sm mt-1">
              Term is required
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Min. Sum Insured (₹) *</label>
            <input type="number" formControlName="minSumInsured" min="0" step="0.01"
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
            <div *ngIf="policyForm.get('minSumInsured')?.invalid && policyForm.get('minSumInsured')?.touched" 
                 class="text-red-600 text-sm mt-1">
              <div *ngIf="policyForm.get('minSumInsured')?.errors?.['required']">Minimum sum insured is required</div>
              <div *ngIf="policyForm.get('minSumInsured')?.errors?.['min']">Minimum sum insured must be greater than 0</div>
            </div>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Key Features</label>
          <textarea formControlName="features" rows="3"
                    placeholder="Enter key features separated by commas (e.g., 24/7 Support, Cashless Treatment, Quick Settlement)"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"></textarea>
          <p class="text-sm text-gray-500 mt-1">Separate multiple features with commas</p>
        </div>

        <!-- Preview Section -->
        <div *ngIf="policyForm.valid" class="bg-gray-50 p-4 rounded-lg">
          <h3 class="text-lg font-semibold text-gray-900 mb-3">Policy Preview</h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
            <div>
              <p class="text-gray-600">Code:</p>
              <p class="font-medium">{{ policyForm.get('code')?.value }}</p>
            </div>
            <div>
              <p class="text-gray-600">Premium:</p>
              <p class="font-medium">{{ formatCurrency(policyForm.get('premium')?.value || 0) }}</p>
            </div>
            <div>
              <p class="text-gray-600">Term:</p>
              <p class="font-medium">{{ policyForm.get('termMonths')?.value }} months</p>
            </div>
          </div>
        </div>

        <div class="flex space-x-4 pt-6 border-t border-gray-200">
          <button type="button" (click)="policyForm.reset()" 
                  class="btn-secondary">
            Reset Form
          </button>
          <button type="submit" [disabled]="policyForm.invalid || isSubmitting"
                  class="btn-primary disabled:opacity-50">
            {{ isSubmitting ? 'Creating Policy...' : 'Create Policy' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>






















